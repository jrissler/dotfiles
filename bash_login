export PATH="/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/local/sphinx/bin:/usr/local/sbin:/usr/local/mysql/bin:/opt/local/lib/postgresql83/bin:$PATH"
export PS1="\w >"
export HISTSIZE=100000
export HISTFILESIZE=409600
export EDITOR="mate -w"

# Getting around
alias ..='cd ..'
alias ...='cd ../../'
alias ....='cd ../../../'
alias .....='cd ../../../../'
alias la='ls -Alh'
alias fl='open -a ForkLift $1'
# alias ps='open -a "Adobe Photoshop CS4" $1'
alias il='open -a "Adobe Illustrator" $1' # Not sure why this doesn't need the 'CS4' part
alias dot='cd ~/Projects/personal/dotfiles'

# These aliases assume that mysql was installed using the Hivelogic tutorial..
# http://hivelogic.com/articles/compiling-mysql-on-snow-leopard/
alias mysql_start='sudo launchctl load -w /Library/LaunchDaemons/com.mysql.mysqld.plist'
alias mysql_stop='sudo launchctl unload -w /Library/LaunchDaemons/com.mysql.mysqld.plist'

function mysqldump_all {
  for I in $(mysql -uroot -e 'show databases' -s --skip-column-names); do mysqldump -uroot $I | gzip > "$I.sql.gz"; done
}

# Reminder: use command 'gembox' to read local gem documentation!

# Find all non-hidden files in the current path
function ff() { find . -iname '*'$*'*' -type f ! -iname ".*" ! -iname "*.svn*" ; }

# Find all non-hidden directories in the current path
function fd() { find . -iname '*'$*'*' -type d ! -iname ".*" ! -iname "*.svn*"; }

# Find all files and directories in the current path
function fa() { find . -iname '*'$*'*' ; }

# http://elsethenif.wordpress.com/2009/06/11/open-a-new-tab-on-terminal-with-the-same-path-on-mac-os-x/
function tab {
	osascript -e "
		tell application \"System Events\" to tell process \"Terminal\" to keystroke \"t\" using command down
		tell application \"Terminal\" to do script \"cd $PWD \" in selected tab of the front window
	" > /dev/null 2>&1
}

# Projects
alias cdp='cd ~/Projects'

# Projects: Gemini
alias fu='cd ~/Projects/gemini/fractured_u/trunk'
alias fua='cd ~/Projects/gemini/fractured_u/assets'
alias fctd='cd ~/Projects/gemini/fctd/rails/'
alias fctda='cd ~/Projects/gemini/fctd/assets'
alias pd='cd ~/Projects/gemini/place_and_displaced/rails'
alias atlas='cd ~/Projects/gemini/fractured_atlas'
alias tad='cd ~/Projects/gemini/tadnet'
alias epic='cd ~/Projects/gemini/tadnet/epic'
alias tadu='cd ~/Projects/gemini/tadnet/user_manager'
alias tadc='cd ~/Projects/gemini/tadnet/user_manager/vendor/plugins/tacc_common'

# Projects: Personal
alias tc='cd ~/Projects/personal/trajet_colle/'
alias met='cd ~/Projects/ucsb/musique_et_torture/'
alias q='cd ~/Projects/personal/queriac/trunk'
alias qa='cd ~/Projects/personal/queriac/assets'

# Projects: Old
# alias b='cd ~/Projects/rgc/bobateacompany.com/trunk'
# alias ba='cd ~/Projects/rgc/bobateacompany.com/assets'
# alias cm='cd ~/Projects/rgc/coffeemystica.com/trunk'
# alias cma='cd ~/Projects/rgc/coffeemystica.com/assets'
# alias z='cd ~/Projects/givezooks/trunk'
# alias za='cd ~/Projects/givezooks/assets'
# alias zh='cd ~/Projects/givezooks/side_projects/zhook/trunk'



# A substitute for cd that gives it history. (doesn't work right for directories containing spaces)
# function cd {
#   pushd . -n > /dev/null
#   pushd $1 > /dev/null
#   popd -n > /dev/null
# }
# Use this to go back through the 'cd' history
# alias b='popd > /dev/null'

# Toggle between two directories
alias swap="cd $OLDPWD"

# Recursively remove all .svn directories from the current directory
function rm_svn {
  find . -name .svn -print0 | xargs -0 rm -rf
}

function push_all_gits {
  ruby ~/Projects/personal/dotfiles/push_all_gits.rb
}

function pull_all_gits {
  ruby ~/Projects/personal/dotfiles/pull_all_gits.rb
}

function push_and_pull {
  pull_all_gits && pull_all_gits
}

# Ruby/Rails
alias mater='mate app config db doc lib public test spec README*'
alias materp='mate app config db doc lib public spec vendor README*'
alias c='script/console'
alias s='script/server'
alias irb='irb'  
alias gemlist='gem list | egrep -v "^( |$)"'
alias rdoc="gem server & sleep 1; open 'http://localhost:8808'"
alias pdoc="open -a Firefox ./doc/plugins/"   
alias rdm="rake db:migrate"
alias rdr="rake db:rollback"
alias cov="open ./coverage/index.html"

# Misc aliases
alias mm='mate /Library/Application\ Support/Macromedia/mm.cfg'
alias start_postgres="sudo su postgres -c '/opt/local/lib/postgresql83/bin/pg_ctl -D /opt/local/var/db/postgresql83/defaultdb -l /opt/local/var/db/postgresql83/defaultdb/logfile start'"
alias stop_postgres="sudo su postgres -c '/opt/local/lib/postgresql83/bin/pg_ctl -D /opt/local/var/db/postgresql83/defaultdb -l /opt/local/var/db/postgresql83/defaultdb/logfile stop'"

# SSH
alias sshfaweb1='ssh deploy@faweb1.geminisbs.net'
alias sshfa='ssh deploy@fracturedatlas.org'
alias sshs='ssh serveradmin@sikelianos.com@sikelianos.com'
alias sshq='ssh zeke@queri.ac'
alias sshgs='ssh serveradmin@givezookssupport.com@givezookssupport.com'
alias sshl='ssh lang@staging.lang.elctech.com'
alias sshr_old='ssh root@67.19.146.186'
alias sshr='ssh root@174.133.236.18'
alias slice='ssh root@209.20.73.226'

# Dotfile
alias settings='mate ~/Projects/personal/dotfiles/bash_login'
alias refresh='source ~/.bash_login; echo ".bash_login sourced"'

# Git
alias gb='git branch -a -v'
alias gs='git status'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gd='git diff -v'

# Open current project's github page (from http://github.com/guides/jump-to-github-from-your-repository)
alias github="open \`git config -l | grep 'remote.origin.url' | sed -En 's/remote.origin.url=git(@|:\/\/)github.com(:|\/)(.+)\/(.+).git/https:\/\/github.com\/\3\/\4/p'\`"

function autopush {
  echo 'git push' > .git/hooks/post-commit
  chmod 755 .git/hooks/post-commit
  echo 'This git repo now pushes automatically post-commit'
}